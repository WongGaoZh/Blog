## 高扩展


	负载均衡 ：
		轮询；加权轮询，随机，加权随机，一致性hash，最小连接数 
		nginx提供了五种算法： 轮询；加权轮询，iphash，urlhash，最小连接数，
	自动扩容 ： 
		k8s的自动扩缩容怎么配置
		• 有哪些Metrics数据来决定扩缩容？
		       HPA v1版本可以根据服务的CPU使用率来进行自动扩缩容。但是并非所有的系统都可以仅依靠CPU或者Memory指标来扩容，对于大多数 Web 应用的后端来说，基于每秒的请求数量进行弹性伸缩来处理突发流量会更加的靠谱，所以对于一个自动扩缩容系统来说，我们不能局限于CPU、Memory基础监控数据，每秒请求数RPS等自定义指标也是十分重要。 幸运的是，HPA V2版本已经支持custom Metrics自定义指标。
		
		• 如何采集这些Metrics数据？
		如果我们的系统默认依赖Prometheus，自定义的Metrics指标则可以从各种数据源或者exporter中获取，基于拉模型的Prometheus会定期从数据源中拉取数据。 假设我们优先采用RPS指标作为系统的默认Metrics数据，可以考虑从网关采集或者使用注入Envoy sidecar等方式获取工作负载的流量指标。
		
		
		• 如何设计一个合理的自动扩缩容算法？
		K8s的HPA controller已经实现了一套简单的自动扩缩容逻辑，默认情况下，每30s检测一次指标，只要检测到了配置HPA的目标值，则会计算出预期的工作负载的副本数，再进行扩缩容操作。同时，为了避免过于频繁的扩缩容，默认在5min内没有重新扩缩容的情况下，才会触发扩缩容。 

